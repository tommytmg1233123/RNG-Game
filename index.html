<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Stick RNG</title>

<style>
body{
margin:0;
overflow:hidden;
font-family:Arial;
}

/* ===== SKY ===== */

#sky{
position:fixed;
inset:0;
background:#5ecbff;
}

/* ===== CLOUD ===== */

#cloud{
position:absolute;
top:80px;
right:200px;
width:120px;
height:50px;
background:white;
border-radius:50px;
}

/* ===== PLATFORM ===== */

#platform{
position:absolute;
left:50%;
bottom:120px;
transform:translateX(-50%);
width:400px;
height:80px;
}

#grass{
height:20px;
background:#3cff00;
}

#dirt{
height:60px;
background:#8b5a2b;
border-bottom-left-radius:20px;
border-bottom-right-radius:20px;
}

/* ===== STICKMAN ===== */

#player{
position:absolute;
left:50%;
bottom:200px;
transform:translateX(-50%);
width:40px;
height:80px;
}

.line{
position:absolute;
background:black;
}

.head{
width:22px;
height:22px;
border:3px solid black;
border-radius:50%;
background:white;
left:9px;
}

.body{
width:4px;
height:35px;
left:18px;
top:24px;
}

.arm{
width:4px;
height:25px;
top:28px;
}

.arm.left{ left:5px; transform:rotate(30deg); }
.arm.right{ right:5px; transform:rotate(-30deg); }

.leg{
width:4px;
height:30px;
top:55px;
}

.leg.left{ left:12px; transform:rotate(5deg); }
.leg.right{ right:12px; transform:rotate(-5deg); }

/* ===== SPINNER TOP ===== */

#spinnerWrap{
position:fixed;
top:20px;
left:50%;
transform:translateX(-50%);
width:900px;
height:140px;
overflow:hidden;
background:#111;
border:3px solid white;
border-radius:12px;
}

#spinner{
display:flex;
}

.card{
width:140px;
height:140px;
margin:0 4px;
display:flex;
align-items:center;
justify-content:center;
background:#222;
border-radius:10px;
}

.card img{
width:120px;
height:120px;
object-fit:cover;
border-radius:8px;
}

/* ===== NEEDLE ===== */

#needle{
position:fixed;
top:120px;
left:50%;
transform:translateX(-50%);
font-size:40px;
color:red;
}

/* ===== BUTTONS ===== */

#buttons{
position:fixed;
top:170px;
left:50%;
transform:translateX(-50%);
text-align:center;
}

#spinBtn{
padding:15px 60px;
font-size:26px;
border:none;
border-radius:14px;
background:#00e5ff;
color:white;
cursor:pointer;
}

#skipBtn{
margin-top:6px;
padding:6px 20px;
font-size:14px;
}

/* ===== POPUP ===== */

#popup{
position:fixed;
top:40%;
left:50%;
transform:translateX(-50%);
font-size:60px;
font-weight:bold;
display:none;
}

/* ===== FLASH ===== */

#flash{
position:fixed;
inset:0;
opacity:0;
pointer-events:none;
transition:opacity .3s;
}

</style>
</head>

<body>

<div id="sky">
<div id="cloud"></div>

<div id="platform">
<div id="grass"></div>
<div id="dirt"></div>
</div>

<div id="player">
<div class="head"></div>
<div class="body line"></div>
<div class="arm left line"></div>
<div class="arm right line"></div>
<div class="leg left line"></div>
<div class="leg right line"></div>
</div>
</div>

<div id="spinnerWrap">
<div id="spinner"></div>
</div>

<div id="needle">â–¼</div>

<div id="buttons">
<button id="spinBtn">SPIN</button><br>
<button id="skipBtn">Skip</button>
</div>

<div id="popup"></div>
<div id="flash"></div>

<script>

/* ===== JUMP ===== */

let vel=0;
let grounded=true;
let player=document.getElementById("player");

document.addEventListener("keydown",e=>{
if(e.code==="Space" && grounded){
vel=14;
grounded=false;
}
});

function jumpLoop(){
let bottom=parseFloat(player.style.bottom||"200");

vel-=0.7;
bottom+=vel;

if(bottom<=200){
bottom=200;
vel=0;
grounded=true;
}

player.style.bottom=bottom+"px";
requestAnimationFrame(jumpLoop);
}
jumpLoop();

/* ===== RNG ===== */

const RARITIES=[
{name:"Common",chance:50,color:"#888"},
{name:"Rare",chance:30,color:"#2196f3"},
{name:"Ultra",chance:15,color:"#9c27b0"},
{name:"Mythic",chance:4,color:"#ff9800"},
{name:"Divine",chance:1,color:"#ffd700"}
];

const MEMES=[
{img:"https://i.imgflip.com/30b1gx.jpg",rarity:"Common"},
{img:"https://i.imgflip.com/1ur9b0.jpg",rarity:"Rare"},
{img:"https://i.imgflip.com/2fm6x.jpg",rarity:"Ultra"}
];

/* ===== BUILD WHEEL ===== */

const spinner=document.getElementById("spinner");

function buildWheel(){
spinner.innerHTML="";
for(let i=0;i<200;i++){
let m=MEMES[i%MEMES.length];
let r=RARITIES.find(x=>x.name===m.rarity);

let d=document.createElement("div");
d.className="card";
d.style.boxShadow=`0 0 20px ${r.color}`;
d.innerHTML=`<img src="${m.img}">`;

spinner.appendChild(d);
}
}
buildWheel();

/* ===== RNG PICK ===== */

function pick(){
let roll=Math.random()*100;
let sum=0;
for(let r of RARITIES){
sum+=r.chance;
if(roll<=sum){
let pool=MEMES.filter(m=>m.rarity===r.name);
return pool[Math.floor(Math.random()*pool.length)];
}
}
return MEMES[0];
}

/* ===== SPIN ===== */

let spinning=false;
let spinTimeout;

document.getElementById("spinBtn").onclick=startSpin;
document.getElementById("skipBtn").onclick=skipSpin;

function startSpin(){

if(spinning) return;
spinning=true;

spinner.style.transition="none";
spinner.style.transform="translateX(0px)";
spinner.offsetHeight;

let meme=pick();
let index=Math.floor(Math.random()*100)+80;
let dist=index*150;

spinner.style.transition="transform 5s cubic-bezier(.1,.7,.1,1)";
spinner.style.transform=`translateX(-${dist}px)`;

spinTimeout=setTimeout(()=>{
finishSpin(meme);
},5000);
}

function skipSpin(){
if(!spinning) return;
clearTimeout(spinTimeout);
finishSpin(pick());
}

function finishSpin(meme){
spinning=false;
let r=RARITIES.find(x=>x.name===meme.rarity);
showPopup(r);
flash(r.color);
}

function showPopup(r){
let p=document.getElementById("popup");
p.innerText=r.name;
p.style.color=r.color;
p.style.display="block";
setTimeout(()=>p.style.display="none",1500);
}

function flash(color){
let f=document.getElementById("flash");
f.style.background=color;
f.style.opacity="0.5";
setTimeout(()=>f.style.opacity="0",400);
}

</script>

</body>
</html>
