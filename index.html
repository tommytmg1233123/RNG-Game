<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Meme RNG</title>

<style>
body{
margin:0;
background:#0f0f0f;
font-family:Arial;
color:white;
overflow:hidden;
}

/* ===== TOP INFO ===== */

#topInfo{
position:fixed;
top:10px;
right:10px;
background:#000a;
padding:10px;
border-radius:10px;
font-size:14px;
}

#rollCounter{
position:fixed;
top:10px;
left:10px;
background:#000a;
padding:10px;
border-radius:10px;
}

/* ===== SPINNER ===== */

#spinnerWrap{
position:fixed;
top:80px;
left:50%;
transform:translateX(-50%);
width:900px;
height:150px;
overflow:hidden;
border:3px solid white;
border-radius:12px;
background:#111;
}

#spinner{
display:flex;
}

.card{
width:150px;
height:150px;
margin:0 4px;
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
background:#222;
border-radius:10px;
}

.card img{
width:120px;
height:120px;
object-fit:cover;
border-radius:8px;
}

/* ===== RED PIN ===== */

#needle{
position:absolute;
top:60px;
left:50%;
transform:translateX(-50%);
font-size:40px;
color:red;
z-index:5;
}

/* ===== SOLS STYLE UI ===== */

#bottomUI{
position:fixed;
bottom:30px;
left:50%;
transform:translateX(-50%);
text-align:center;
}

#spinBtn{
background:linear-gradient(#00e5ff,#0094ff);
border:none;
padding:18px 70px;
font-size:28px;
border-radius:16px;
color:white;
cursor:pointer;
box-shadow:0 0 25px #00e5ff;
}

#skipBtn{
margin-top:8px;
background:#333;
border:none;
padding:6px 24px;
font-size:14px;
border-radius:10px;
color:white;
cursor:pointer;
}

/* ===== POPUP TEXT ===== */

#popup{
position:fixed;
top:35%;
left:50%;
transform:translateX(-50%);
font-size:70px;
font-weight:bold;
display:none;
}

/* ===== FLASH OVERLAY ===== */

#flash{
position:fixed;
inset:0;
opacity:0;
pointer-events:none;
transition:opacity .3s;
}

</style>
</head>

<body>

<div id="rollCounter">Rolls: 0</div>
<div id="topInfo"></div>

<div id="needle">â–¼</div>

<div id="spinnerWrap">
<div id="spinner"></div>
</div>

<div id="popup"></div>
<div id="flash"></div>

<div id="bottomUI">
<button id="spinBtn">SPIN</button><br>
<button id="skipBtn">Skip</button>
</div>

<script>

/* ===== CUSTOM RARITIES (EDIT THIS) ===== */

const RARITIES=[
{name:"Common",chance:45,color:"#888"},
{name:"Uncommon",chance:30,color:"#4caf50"},
{name:"Rare",chance:15,color:"#2196f3"},
{name:"Ultra",chance:8,color:"#9c27b0"},
{name:"Mythic",chance:1.9,color:"#ff9800"},
{name:"Divine",chance:0.1,color:"#ffd700"}
];

/* ===== CUSTOM MEMES (ADD YOUR OWN HERE) ===== */

const CUSTOM_MEMES=[
{
name:"Drake Meme",
img:"https://i.imgflip.com/30b1gx.jpg",
rarity:"Common"
},
{
name:"Distracted Boyfriend",
img:"https://i.imgflip.com/1ur9b0.jpg",
rarity:"Rare"
}
];

/* ===== SHOW CHANCES ===== */

document.getElementById("topInfo").innerHTML=
RARITIES.map(r=>`${r.name}: ${r.chance}%`).join("<br>");

/* ===== BUILD MEME POOL ===== */

const MEMES=CUSTOM_MEMES;

/* ===== SPINNER BUILD ===== */

const spinner=document.getElementById("spinner");

function buildSpinner(){
spinner.innerHTML="";
for(let i=0;i<MEMES.length*6;i++){
let m=MEMES[i % MEMES.length];
let rarity=RARITIES.find(r=>r.name===m.rarity);

let d=document.createElement("div");
d.className="card";
d.style.boxShadow=`0 0 20px ${rarity.color}`;
d.innerHTML=`<img src="${m.img}">`;

spinner.appendChild(d);
}
}
buildSpinner();

/* ===== RNG ===== */

function randomRarity(){
let roll=Math.random()*100;
let total=0;
for(let r of RARITIES){
total+=r.chance;
if(roll<=total) return r;
}
return RARITIES[0];
}

function randomMeme(){
let r=randomRarity();
let pool=MEMES.filter(m=>m.rarity===r.name);
return pool[Math.floor(Math.random()*pool.length)];
}

/* ===== ROLL COUNTER SAVE ===== */

let rolls=parseInt(localStorage.getItem("rolls")||0);
updateRolls();

function updateRolls(){
document.getElementById("rollCounter").innerText="Rolls: "+rolls;
}

/* ===== SPIN SYSTEM ===== */

let spinning=false;
let spinTimeout;

document.getElementById("spinBtn").onclick=startSpin;
document.getElementById("skipBtn").onclick=skipSpin;

function startSpin(){

if(spinning) return;
spinning=true;

rolls++;
localStorage.setItem("rolls",rolls);
updateRolls();

let meme=randomMeme();
let index=MEMES.indexOf(meme)+(MEMES.length*2);
let distance=index*158;

spinner.style.transition="transform 5s cubic-bezier(.1,.7,.1,1)";
spinner.style.transform=`translateX(-${distance}px)`;

spinTimeout=setTimeout(()=>{
finishSpin(meme);
},5000);

}

function skipSpin(){
if(!spinning) return;
clearTimeout(spinTimeout);
let meme=randomMeme();
finishSpin(meme);
}

function finishSpin(meme){

spinning=false;

let rarity=RARITIES.find(r=>r.name===meme.rarity);

showPopup(rarity);
flash(rarity.color);

}

/* ===== POPUP ===== */

function showPopup(rarity){
let p=document.getElementById("popup");
p.innerText=rarity.name;
p.style.color=rarity.color;
p.style.display="block";

setTimeout(()=>p.style.display="none",1500);
}

/* ===== FLASH ===== */

function flash(color){
let f=document.getElementById("flash");
f.style.background=color;
f.style.opacity="0.5";
setTimeout(()=>f.style.opacity="0",400);
}

</script>

</body>
</html>
