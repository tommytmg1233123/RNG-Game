<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Meme RNG World</title>

<style>
body{
margin:0;
overflow:hidden;
font-family:Arial;
background:#87CEEB;
}

/* ===== WORLD ===== */

#world{
position:fixed;
inset:0;
background:linear-gradient(#87CEEB,#4CAF50);
}

.tree{
position:absolute;
width:40px;
height:80px;
background:#5d4037;
bottom:0;
}
.tree::after{
content:"";
position:absolute;
bottom:60px;
left:-40px;
width:120px;
height:100px;
background:#2e7d32;
border-radius:50%;
}

/* ===== PLAYER ===== */

#player{
position:absolute;
width:30px;
height:60px;
bottom:120px;
left:200px;
}

.stick{
position:absolute;
background:black;
}

.head{
width:20px;
height:20px;
border:3px solid black;
border-radius:50%;
left:5px;
top:0;
background:white;
}

.body{
width:4px;
height:30px;
left:13px;
top:20px;
}

.arm{
width:4px;
height:20px;
top:25px;
}

.arm.left{ left:0; transform:rotate(30deg); }
.arm.right{ right:0; transform:rotate(-30deg); }

.leg{
width:4px;
height:25px;
top:45px;
}

.leg.left{ left:6px; transform:rotate(10deg); }
.leg.right{ right:6px; transform:rotate(-10deg); }

/* ===== RNG UI ===== */

#rngUI{
position:fixed;
left:0;
right:0;
bottom:0;
padding:20px;
display:flex;
flex-direction:column;
align-items:center;
}

#spinBtn{
padding:18px 60px;
font-size:24px;
border:none;
border-radius:10px;
background:#00e5ff;
cursor:pointer;
}

#skipBtn{
margin-top:10px;
padding:6px 25px;
}

/* wheel */

#wheelWindow{
width:800px;
height:140px;
overflow:hidden;
margin-bottom:20px;
border:4px solid black;
background:#111;
}

#wheel{
display:flex;
}

.item{
width:140px;
height:140px;
flex-shrink:0;
display:flex;
align-items:center;
justify-content:center;
}

.item img{
width:120px;
height:120px;
object-fit:cover;
border-radius:10px;
}

/* needle */

#needle{
position:absolute;
bottom:180px;
left:50%;
transform:translateX(-50%);
font-size:40px;
color:red;
}

/* popup */

#popup{
position:fixed;
top:20%;
left:50%;
transform:translateX(-50%);
font-size:60px;
font-weight:bold;
display:none;
}

/* odds text */

#odds{
position:fixed;
top:10px;
right:10px;
background:#000a;
color:white;
padding:10px;
border-radius:8px;
}

</style>
</head>

<body>

<div id="world">
<div class="tree" style="left:400px"></div>
<div class="tree" style="left:900px"></div>
</div>

<div id="player">
<div class="head stick"></div>
<div class="body stick"></div>
<div class="arm left stick"></div>
<div class="arm right stick"></div>
<div class="leg left stick"></div>
<div class="leg right stick"></div>
</div>

<div id="odds">
Common 60%<br>
Uncommon 25%<br>
Rare 10%<br>
Ultra 4%<br>
Mythic 1%
</div>

<div id="popup"></div>

<div id="needle">â–¼</div>

<div id="rngUI">
<div id="wheelWindow">
<div id="wheel"></div>
</div>

<button id="spinBtn">SPIN</button>
<button id="skipBtn">Skip</button>
</div>

<script>

/* ===== PLAYER MOVEMENT ===== */

let player = document.getElementById("player");
let keys = {};
let velY = 0;
let grounded = true;

document.addEventListener("keydown", e=>keys[e.key.toLowerCase()] = true);
document.addEventListener("keyup", e=>keys[e.key.toLowerCase()] = false);

function gameLoop(){

let x = player.offsetLeft;
let y = player.offsetTop;

if(keys["a"]) x -= 4;
if(keys["d"]) x += 4;

if(keys["w"] && grounded){
velY = -14;
grounded=false;
}

velY += 0.7;
y += velY;

if(y > window.innerHeight-180){
y = window.innerHeight-180;
velY = 0;
grounded = true;
}

player.style.left = x+"px";
player.style.top = y+"px";

requestAnimationFrame(gameLoop);
}
gameLoop();

/* ===== RNG SYSTEM ===== */

const rarities=[
{name:"Common",chance:60,color:"gray"},
{name:"Uncommon",chance:25,color:"green"},
{name:"Rare",chance:10,color:"blue"},
{name:"Ultra",chance:4,color:"purple"},
{name:"Mythic",chance:1,color:"gold"}
];

const memes=[
"https://i.imgflip.com/30b1gx.jpg",
"https://i.imgflip.com/1bij.jpg",
"https://i.imgflip.com/26am.jpg",
"https://i.imgflip.com/2fm6x.jpg"
];

function randomRarity(){
let roll=Math.random()*100;
let sum=0;
for(let r of rarities){
sum+=r.chance;
if(roll<sum) return r;
}
return rarities[0];
}

/* build infinite wheel */

const wheel=document.getElementById("wheel");

function buildWheel(){
wheel.innerHTML="";
for(let i=0;i<200;i++){
let div=document.createElement("div");
div.className="item";

let img=document.createElement("img");
img.src=memes[Math.floor(Math.random()*memes.length)];

div.appendChild(img);
wheel.appendChild(div);
}
}
buildWheel();

/* spin */

let spinning=false;

document.getElementById("spinBtn").onclick=spin;
document.getElementById("skipBtn").onclick=endSpin;

function spin(){
if(spinning) return;
spinning=true;

let start=performance.now();
let duration=4000;
let startX=0;

function animate(t){
let p=(t-start)/duration;
if(p>1) p=1;

let ease=1-Math.pow(1-p,3);
let move = ease * 6000;

wheel.style.transform=`translateX(${-move}px)`;

if(p<1){
requestAnimationFrame(animate);
}else{
endSpin();
}
}

requestAnimationFrame(animate);
}

function endSpin(){
spinning=false;

let rarity=randomRarity();

let popup=document.getElementById("popup");
popup.style.display="block";
popup.style.color=rarity.color;
popup.innerText=rarity.name;

setTimeout(()=>popup.style.display="none",1500);
}

</script>

</body>
</html>
