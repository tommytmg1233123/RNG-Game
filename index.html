<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Meme RNG</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#111;
    color:white;
    text-align:center;
    overflow:hidden;
}

/* RARITY CHANCES */
#chances{
    position:fixed;
    top:10px;
    right:10px;
    background:#222;
    padding:10px 15px;
    border-radius:10px;
    border:2px solid white;
    font-size:14px;
    z-index:20;
}

/* SPINNER BAR */
#spinnerWrap{
    position:relative;
    width:90%;
    margin:40px auto;
    overflow:hidden;
    border:5px solid white;
    height:150px;
    border-radius:25px;
    background:#222;
}

/* SPINNER */
#spinner{
    display:flex;
    transition:transform 5s cubic-bezier(.1,.7,.1,1);
}

/* CARD */
.card{
    min-width:150px;
    height:150px;
    background:#222;
    margin:0 6px;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    border-radius:20px;
}

.card img{
    width:110px;
    height:110px;
    border-radius:15px;
    object-fit:cover;
}

/* NEEDLE */
#needle{
    position:absolute;
    top:-10px;
    left:50%;
    transform:translateX(-50%);
    font-size:40px;
    z-index:10;
}

/* BUTTONS */
#spinBtn{
    position:fixed;
    bottom:80px;
    left:50%;
    transform:translateX(-50%);
    padding:18px 40px;
    font-size:24px;
    border-radius:20px;
    border:none;
    background:#4caf50;
    color:white;
    cursor:pointer;
}

#skipBtn{
    position:fixed;
    bottom:30px;
    left:50%;
    transform:translateX(-50%);
    padding:10px 20px;
    font-size:16px;
    border-radius:15px;
    border:none;
    background:#888;
    color:white;
    cursor:pointer;
}

/* REVEAL */
#reveal{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:50px;
    font-weight:bold;
    display:none;
    text-shadow:0 0 20px white;
    text-align:center;
    z-index:30;
}

#reveal img{
    width:200px;
    height:200px;
    border-radius:20px;
    margin-top:10px;
}

/* INVENTORY BAR */
#inventory{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    height:90px;
    background:#0008;
    display:flex;
    overflow-x:auto;
    padding:10px;
    gap:10px;
    z-index:15;
}

.invItem{
    min-width:70px;
    height:70px;
    border-radius:10px;
    background:#222;
    display:flex;
    justify-content:center;
    align-items:center;
}

.invItem img{
    width:65px;
    height:65px;
    border-radius:10px;
    object-fit:cover;
}
</style>
</head>

<body>

<h1>Meme RNG</h1>

<div id="chances">
<b>Rarity Chances:</b><br>
Common — 40%<br>
Uncommon — 30%<br>
Rare — 20%<br>
Ultra — 8%<br>
Mythic — 1.5%<br>
Divine — 0.5%
</div>

<div id="spinnerWrap">
    <div id="needle">▼</div>
    <div id="spinner"></div>
</div>

<button id="spinBtn" onclick="spin()">SPIN</button>
<button id="skipBtn" onclick="skip()">SKIP</button>

<div id="reveal"></div>

<div id="inventory"></div>

<audio id="tickSound" src="tick.mp3"></audio>

<script>

/* RARITIES */
const rarities=[
    {name:"Common",chance:40,color:"#888"},
    {name:"Uncommon",chance:30,color:"#4caf50"},
    {name:"Rare",chance:20,color:"#2196f3"},
    {name:"Ultra",chance:8,color:"#9c27b0"},
    {name:"Mythic",chance:1.5,color:"#ff9800"},
    {name:"Divine",chance:0.5,color:"#ffd700"}
];

/* REAL MEME URLS (SAFE FOR GITHUB) */
const memeURLs = [
    "https://i.imgur.com/4AiXzf8.jpeg",
    "https://i.imgur.com/0rZqgkP.jpeg",
    "https://i.imgur.com/8pQeQKp.jpeg",
    "https://i.imgur.com/1Q9Z1ZC.jpeg",
    "https://i.imgur.com/7yZ8Q2B.jpeg",
    "https://i.imgur.com/6YV2Q0v.jpeg",
    "https://i.imgur.com/1d9Qw2m.jpeg",
    "https://i.imgur.com/3Qe4Y8d.jpeg",
    "https://i.imgur.com/9Yk3p4C.jpeg",
    "https://i.imgur.com/2Xk7f8L.jpeg",
    "https://i.imgur.com/5Qw9r1B.jpeg",
    "https://i.imgur.com/7Jk2s3V.jpeg",
    "https://i.imgur.com/8Lm4p2N.jpeg",
    "https://i.imgur.com/4Wk9s5Q.jpeg",
    "https://i.imgur.com/6Qp3v7M.jpeg",
    "https://i.imgur.com/3Pq8n4B.jpeg",
    "https://i.imgur.com/9Qw2k6J.jpeg",
    "https://i.imgur.com/2Lm7p3N.jpeg",
    "https://i.imgur.com/5Qk9s4V.jpeg",
    "https://i.imgur.com/7Qp3v6M.jpeg"
];

/* BUILD MEMES */
let memes=[];
for(let i=0;i<memeURLs.length;i++){
    const r=randomRarity();
    memes.push({
        name:r.name+" Meme "+i,
        rarity:r,
        img:memeURLs[i]
    });
}

/* INVENTORY */
let inventory=[];

/* BUILD SPINNER */
const spinner=document.getElementById("spinner");

function buildSpinner(){
    spinner.innerHTML="";
    for(let i=0;i<20;i++){  // repeat wheel to prevent darkness
        memes.forEach(m=>{
            const d=document.createElement("div");
            d.className="card";
            d.style.boxShadow="0 0 25px "+m.rarity.color;
            d.innerHTML=`<img src="${m.img}"><div>${m.rarity.name}</div>`;
            spinner.appendChild(d);
        });
    }
}
buildSpinner();

/* RANDOM RARITY */
function randomRarity(){
    let roll=Math.random()*100;
    let total=0;
    for(let r of rarities){
        total+=r.chance;
        if(roll<=total)return r;
    }
    return rarities[0];
}

/* RANDOM MEME */
function randomMeme(){
    const r=randomRarity();
    const pool=memes.filter(m=>m.rarity.name===r.name);
    return pool[Math.floor(Math.random()*pool.length)];
}

/* SPIN */
let spinning=false;
let skipTimeout=null;

function spin(){
    if(spinning)return;
    spinning=true;

    const tick=document.getElementById("tickSound");

    let meme=randomMeme();
    let index=memes.indexOf(meme);

    let loops=30;
    let distance=(index*162)+(loops*memes.length*162);

    spinner.style.transition="transform 5s cubic-bezier(.1,.7,.1,1)";
    spinner.style.transform=`translateX(-${distance}px)`;

    skipTimeout=setTimeout(()=>{
        win(meme);
        spinning=false;
    },5000);
}

/* SKIP */
function skip(){
    if(!spinning)return;
    clearTimeout(skipTimeout);
    win(randomMeme());
    spinning=false;
}

/* WIN */
function win(m){
    inventory.push(m);
    updateInventory();
    showReveal(m);
}

/* INVENTORY UPDATE */
function updateInventory(){
    const inv=document.getElementById("inventory");
    inv.innerHTML="";
    inventory.forEach(m=>{
        const d=document.createElement("div");
        d.className="invItem";
        d.innerHTML=`<img src="${m.img}">`;
        inv.appendChild(d);
    });
}

/* REVEAL */
function showReveal(m){
    const r=document.getElementById("reveal");
    r.style.display="block";
    r.style.color=m.rarity.color;
    r.innerHTML=`${m.rarity.name}<br><img src="${m.img}">`;

    setTimeout(()=>{ r.style.display="none"; },2000);
}

</script>

</body>
</html>
