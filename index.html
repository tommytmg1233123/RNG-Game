<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Meme RNG</title>

<style>
body{
margin:0;
background:#111;
color:white;
font-family:Arial;
overflow:hidden;
}

/* ===== CHANCES TEXT ===== */
#chances{
position:fixed;
top:10px;
right:10px;
font-size:14px;
text-align:right;
}

/* ===== INVENTORY TEXT (OLD STYLE) ===== */
#inventoryText{
position:fixed;
bottom:10px;
left:10px;
font-size:14px;
max-width:300px;
}

/* ===== SPINNER ===== */
#spinnerWrap{
position:fixed;
top:20px;
left:50%;
transform:translateX(-50%);
width:900px;
height:150px;
overflow:hidden;
border:3px solid white;
}

#spinner{
display:flex;
}

.card{
width:150px;
height:150px;
margin:0 4px;
background:#222;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
border-radius:8px;
}

.card img{
width:120px;
height:120px;
object-fit:cover;
}

/* NEEDLE */
#needle{
position:absolute;
top:-10px;
left:50%;
transform:translateX(-50%);
font-size:40px;
z-index:5;
}

/* ===== SOLS RNG STYLE BUTTON AREA ===== */
#bottomUI{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
text-align:center;
}

#spinBtn{
font-size:28px;
padding:14px 50px;
}

#skipBtn{
margin-top:6px;
font-size:14px;
padding:6px 20px;
}

/* ===== STICKMAN WORLD ===== */
#world{
position:fixed;
bottom:120px;
left:0;
width:100%;
height:200px;
background:#1b5e20;
overflow:hidden;
}

.tree{
position:absolute;
bottom:0;
width:60px;
height:120px;
background:#2e7d32;
border-radius:20px;
}

#player{
position:absolute;
bottom:0;
left:100px;
width:30px;
height:60px;
background:white;
}

/* POPUP TEXT */
#popup{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
font-size:60px;
display:none;
}
</style>
</head>

<body>

<div id="chances"></div>
<div id="inventoryText"></div>

<div id="spinnerWrap">
<div id="needle">â–¼</div>
<div id="spinner"></div>
</div>

<div id="popup"></div>

<div id="world">
<div id="player"></div>
</div>

<div id="bottomUI">
<button id="spinBtn" onclick="spin()">SPIN</button>
<br>
<button id="skipBtn" onclick="skipSpin()">Skip</button>
</div>

<audio id="tick" src="tick.mp3"></audio>

<script>

/* ===== RARITIES (LESS COMMONS) ===== */
const rarities=[
{name:"Common",chance:45,color:"#888"},
{name:"Uncommon",chance:30,color:"#4caf50"},
{name:"Rare",chance:15,color:"#2196f3"},
{name:"Ultra",chance:8,color:"#9c27b0"},
{name:"Mythic",chance:1.9,color:"#ff9800"},
{name:"Divine",chance:0.1,color:"#ffd700"}
];

/* ===== SHOW CHANCES ===== */
document.getElementById("chances").innerHTML=
rarities.map(r=>`${r.name}: ${r.chance}%`).join("<br>");

/* ===== REAL MEMES (ADD MORE IF YOU WANT) ===== */
const memeImages=[
"https://i.imgflip.com/30b1gx.jpg",
"https://i.imgflip.com/1bij.jpg",
"https://i.imgflip.com/26am.jpg",
"https://i.imgflip.com/2fm6x.jpg",
"https://i.imgflip.com/3vzej.jpg"
];

/* ===== BUILD MEMES ===== */
const memes=[];
for(let i=0;i<200;i++){
let r=randomRarity();
memes.push({
rarity:r,
img:memeImages[i % memeImages.length]
});
}

/* ===== LOOP SPINNER ===== */
const spinner=document.getElementById("spinner");

function buildSpinner(){
spinner.innerHTML="";
for(let i=0;i<memes.length*3;i++){
let m=memes[i % memes.length];
let d=document.createElement("div");
d.className="card";
d.style.boxShadow=`0 0 20px ${m.rarity.color}`;
d.innerHTML=`<img src="${m.img}">`;
spinner.appendChild(d);
}
}
buildSpinner();

/* ===== RNG ===== */
function randomRarity(){
let roll=Math.random()*100;
let total=0;
for(let r of rarities){
total+=r.chance;
if(roll<=total)return r;
}
return rarities[0];
}

function randomMeme(){
let r=randomRarity();
let pool=memes.filter(m=>m.rarity.name===r.name);
return pool[Math.floor(Math.random()*pool.length)];
}

/* ===== INVENTORY (OLD STYLE TEXT) ===== */
let inventory=JSON.parse(localStorage.getItem("inv")||"[]");

function updateInventory(){
document.getElementById("inventoryText").innerHTML=
"Your Stuff:<br>"+inventory.map(m=>m.rarity.name).join(", ");
}
updateInventory();

/* ===== SPIN ===== */
let spinning=false;
let skip=false;

function spin(){

if(spinning)return;
spinning=true;
skip=false;

let meme=randomMeme();
let index=memes.indexOf(meme)+(memes.length);

let distance=index*158;

spinner.style.transition="transform 5s cubic-bezier(.1,.7,.1,1)";
spinner.style.transform=`translateX(-${distance}px)`;

tickLoop();

setTimeout(()=>{
finishSpin(meme);
},5000);

}

function skipSpin(){
skip=true;
}

/* ===== SOUND ===== */
function tickLoop(){
let t=document.getElementById("tick");
let int=setInterval(()=>{
t.currentTime=0;
t.play();
if(!spinning)clearInterval(int);
},120);
}

/* ===== FINISH ===== */
function finishSpin(meme){

spinning=false;

inventory.push(meme);
localStorage.setItem("inv",JSON.stringify(inventory));
updateInventory();

showPopup(meme.rarity.name);

}

/* ===== POPUP TEXT ONLY ===== */
function showPopup(text){
let p=document.getElementById("popup");
p.innerText=text;
p.style.display="block";
setTimeout(()=>p.style.display="none",1500);
}

/* ===== STICKMAN CONTROLS ===== */
let player=document.getElementById("player");
let px=100;
let vy=0;
let onGround=true;

document.addEventListener("keydown",e=>{
if(e.key==="a") px-=10;
if(e.key==="d") px+=10;
if(e.key==="w" && onGround){
vy=12;
onGround=false;
}
});

function physics(){
vy-=0.6;
if(!onGround){
player.style.bottom=(parseInt(player.style.bottom||0)+vy)+"px";
if(parseInt(player.style.bottom)<=0){
player.style.bottom="0px";
onGround=true;
}
}
player.style.left=px+"px";
requestAnimationFrame(physics);
}
physics();

/* TREES */
for(let i=0;i<6;i++){
let t=document.createElement("div");
t.className="tree";
t.style.left=(i*300+200)+"px";
document.getElementById("world").appendChild(t);
}

</script>
</body>
</html>
